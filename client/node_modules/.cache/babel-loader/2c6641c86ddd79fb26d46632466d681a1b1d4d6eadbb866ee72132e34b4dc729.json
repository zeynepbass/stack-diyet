{"ast":null,"code":"import { create } from 'zustand';\nimport axios from 'axios';\nconst useStore = create(set => ({\n  data: [],\n  // Store the fetched data\n  veri: [],\n  filteredData: [],\n  // Store the filtered data\n  // search: \"\", // Store the search term\n  // setSearch: (searchValue) => set({ search: searchValue }),\n  firstName: JSON.parse(localStorage.getItem(\"firstName\")) || \"\",\n  fetchPost: async () => {\n    try {\n      set(state => ({\n        loading: true\n      })); // Set loading to true\n\n      const response = await axios.get('http://localhost:6078/panel');\n      if (response && response.data) {\n        set(state => ({\n          filteredData: response.data,\n          loading: false // Set loading to false after fetching\n        }));\n      } else {\n        console.error(\"No data received from the API.\");\n        set(state => ({\n          filteredData: [],\n          loading: false\n        }));\n      }\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      set(state => ({\n        loading: false // Set loading to false on error\n      }));\n    }\n  },\n  // Update search term and filter data accordingly\n  // setSearch: (newSearch) => {\n  //     set((state) => {\n  //         const filteredData = state.data.filter((item) =>\n  //             item.baslik.toLowerCase().includes(newSearch.toLowerCase()) // Filter based on new search term\n  //         );\n  //         return {\n  //             search: newSearch,\n  //             filteredData: filteredData, // Update filtered data\n  //         };\n  //     });\n  // },\n\n  fetchLike: async (postId, incrementValue) => {\n    try {\n      await axios.put(`http://localhost:6078/panel/like/${postId}`);\n      set(state => {\n        const updatedPosts = state.filteredData.map(post => post._id === postId ? {\n          ...post,\n          likeCount: incrementValue\n        } : post);\n        return {\n          filteredData: updatedPosts\n        };\n      });\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    }\n  },\n  fetchComment: async formData => {\n    try {\n      // `set` fonksiyonu içerisinde `state` parametresi mevcut\n      set(state => {\n        const firstName = state.firstName; // `state` burada parametre olarak geliyor\n        const emailData = {\n          ...formData,\n          acikla: firstName // acikla alanına firstName ekleniyor\n        };\n\n        // POST isteği\n        const response = axios.post(\"http://localhost:6078/panel\", emailData); // Use POST if required by the backend\n\n        // Eğer response.data yeni postu içeriyorsa\n        response.then(res => {\n          const newPost = res.data; // response'dan yeni post verisini alıyoruz\n\n          // Filtrelenmiş veriyi güncelliyoruz\n          const updatedFilteredData = [...state.filteredData, newPost]; // Yeni postu ekliyoruz\n\n          return {\n            filteredData: updatedFilteredData // filteredData'yı güncelliyoruz\n          };\n        });\n      });\n    } catch (error) {\n      console.error('Error submitting comment:', error);\n    }\n  },\n  fetchRegister: async formData => {\n    try {\n      const response = await axios.post(\"http://localhost:6078/uye-ol\", formData); // Use POST if required by the backend\n\n      if (response) {\n        localStorage.setItem(\"firstName\", JSON.stringify(response.data.result.firstName));\n      } else {\n        console.error(\"Response data is missing\");\n      }\n    } catch (error) {\n      console.error('Error submitting comment:', error);\n    }\n  },\n  fetchLogin: async formData => {\n    try {\n      const response = await axios.post(\"http://localhost:6078/signin\", formData); // Use POST if required by the backend\n      if (response) {\n        localStorage.setItem(\"user\", JSON.stringify(response.data));\n      } else {\n        console.error(\"Response data is missing\");\n      }\n    } catch (error) {\n      console.error('Error submitting comment:', error);\n    }\n  },\n  fetchSifre: async formData => {\n    try {\n      var _localEmail$result;\n      // localStorage'dan \"user\" bilgilerini al\n      const localEmail = JSON.parse(localStorage.getItem(\"user\"));\n\n      // localEmail objesinin içinde yer alan email alanını al\n      const email = localEmail === null || localEmail === void 0 ? void 0 : (_localEmail$result = localEmail.result) === null || _localEmail$result === void 0 ? void 0 : _localEmail$result.email;\n      if (!email) {\n        console.error(\"Email bilgisi bulunamadı.\");\n        console.log('E-posta bilgisi bulunamadı. Lütfen giriş yapın.');\n        return;\n      }\n\n      // formData'ya email'i ekle\n      const formDataWithEmail = {\n        ...formData,\n        email\n      };\n      console.log(formDataWithEmail); // Kontrol amacıyla\n\n      const response = await axios.put(\"http://localhost:6078/sifre\", formDataWithEmail);\n      console.log(response); // API'den gelen yanıtı kontrol et\n\n      // API yanıtını kontrol et\n      if (response.data.success) {\n        console.log(\"Şifre güncelleme başarılı.\");\n      } else {\n        console.log(\"Şifre güncellenirken bir hata oluştu.\");\n      }\n    } catch (error) {\n      console.error(\"Hata oluştu:\", error);\n      console.log(\"Bir hata oluştu. Lütfen tekrar deneyin.\");\n    }\n  }\n}));\nexport default useStore;","map":{"version":3,"names":["create","axios","useStore","set","data","veri","filteredData","firstName","JSON","parse","localStorage","getItem","fetchPost","state","loading","response","get","console","error","fetchLike","postId","incrementValue","put","updatedPosts","map","post","_id","likeCount","fetchComment","formData","emailData","acikla","then","res","newPost","updatedFilteredData","fetchRegister","setItem","stringify","result","fetchLogin","fetchSifre","_localEmail$result","localEmail","email","log","formDataWithEmail","success"],"sources":["/Users/zeynepbas/Documents/GitHub/stack-diyet/client/src/components/useStore.js"],"sourcesContent":["import { create } from 'zustand';\nimport axios from 'axios';\n\nconst useStore = create((set) => ({\n    data: [],  // Store the fetched data\n    veri: [],\n    filteredData: [], // Store the filtered data\n    // search: \"\", // Store the search term\n    // setSearch: (searchValue) => set({ search: searchValue }),\n  firstName: JSON.parse(localStorage.getItem(\"firstName\")) || \"\",\n  fetchPost: async () => {\n    try {\n        set((state) => ({ loading: true }));  // Set loading to true\n\n        const response = await axios.get('http://localhost:6078/panel');\n\n        if (response && response.data) {\n            set((state) => ({\n                filteredData: response.data,\n                loading: false,  // Set loading to false after fetching\n            }));\n        } else {\n            console.error(\"No data received from the API.\");\n            set((state) => ({\n                filteredData: [],\n                loading: false,\n            }));\n        }\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        set((state) => ({\n            loading: false,  // Set loading to false on error\n        }));\n    }\n},\n\n\n\n    // Update search term and filter data accordingly\n    // setSearch: (newSearch) => {\n    //     set((state) => {\n    //         const filteredData = state.data.filter((item) =>\n    //             item.baslik.toLowerCase().includes(newSearch.toLowerCase()) // Filter based on new search term\n    //         );\n    //         return {\n    //             search: newSearch,\n    //             filteredData: filteredData, // Update filtered data\n    //         };\n    //     });\n    // },\n\n    fetchLike: async (postId, incrementValue) => {\n        try {\n            await axios.put(`http://localhost:6078/panel/like/${postId}`);\n            set((state) => {\n                const updatedPosts = state.filteredData.map((post) =>\n                    post._id === postId ? { ...post, likeCount: incrementValue } : post\n                );\n                return {\n                    filteredData: updatedPosts,\n                };\n            });\n        } catch (error) {\n            console.error('Error fetching data:', error);\n        }\n    },\n    fetchComment: async (formData) => {\n        try {\n            // `set` fonksiyonu içerisinde `state` parametresi mevcut\n            set((state) => {\n                const firstName = state.firstName;  // `state` burada parametre olarak geliyor\n                const emailData = { \n                    ...formData,\n                    acikla: firstName,  // acikla alanına firstName ekleniyor\n                };\n                 \n                // POST isteği\n                const response = axios.post(\"http://localhost:6078/panel\", emailData);  // Use POST if required by the backend\n    \n                // Eğer response.data yeni postu içeriyorsa\n                response.then(res => {\n                    const newPost = res.data; // response'dan yeni post verisini alıyoruz\n    \n                    // Filtrelenmiş veriyi güncelliyoruz\n                    const updatedFilteredData = [...state.filteredData, newPost]; // Yeni postu ekliyoruz\n    \n                    return {\n                        filteredData: updatedFilteredData, // filteredData'yı güncelliyoruz\n                    };\n                });\n            });\n        } catch (error) {\n            console.error('Error submitting comment:', error);\n        }\n    },\n    \n    fetchRegister: async (formData) => {\n     \n        try {\n           const response= await axios.post(\"http://localhost:6078/uye-ol\", formData); // Use POST if required by the backend\n\n        \n           if (response) {\n       \n             localStorage.setItem(\"firstName\", JSON.stringify(response.data.result.firstName));\n           } else {\n             console.error(\"Response data is missing\");\n           }\n        } catch (error) {\n            console.error('Error submitting comment:', error);\n        }\n    },\n    fetchLogin: async (formData) => {\n     \n        try {\n     const response=  await axios.post(\"http://localhost:6078/signin\", formData); // Use POST if required by the backend\n     if (response) {\n       \n        localStorage.setItem(\"user\", JSON.stringify(response.data));\n      } else {\n        console.error(\"Response data is missing\");\n      }\n        } catch (error) {\n            console.error('Error submitting comment:', error);\n        }\n    },\n    fetchSifre: async (formData) => {\n        try {\n            // localStorage'dan \"user\" bilgilerini al\n            const localEmail = JSON.parse(localStorage.getItem(\"user\"));\n            \n            // localEmail objesinin içinde yer alan email alanını al\n            const email = localEmail?.result?.email;\n    \n            if (!email) {\n                console.error(\"Email bilgisi bulunamadı.\");\n                console.log('E-posta bilgisi bulunamadı. Lütfen giriş yapın.');\n                return;\n            }\n    \n            // formData'ya email'i ekle\n            const formDataWithEmail = { ...formData, email };\n    \n            console.log(formDataWithEmail); // Kontrol amacıyla\n    \n            const response = await axios.put(\"http://localhost:6078/sifre\", formDataWithEmail);\n            console.log(response);  // API'den gelen yanıtı kontrol et\n            \n            // API yanıtını kontrol et\n            if (response.data.success) {\n                console.log(\"Şifre güncelleme başarılı.\");\n    \n               \n            } else {\n                console.log(\"Şifre güncellenirken bir hata oluştu.\");\n            }\n    \n        } catch (error) {\n            console.error(\"Hata oluştu:\", error);\n            console.log(\"Bir hata oluştu. Lütfen tekrar deneyin.\");\n        }\n    }\n    \n}));\n\nexport default useStore;\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAGF,MAAM,CAAEG,GAAG,KAAM;EAC9BC,IAAI,EAAE,EAAE;EAAG;EACXC,IAAI,EAAE,EAAE;EACRC,YAAY,EAAE,EAAE;EAAE;EAClB;EACA;EACFC,SAAS,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,IAAI,EAAE;EAC9DC,SAAS,EAAE,MAAAA,CAAA,KAAY;IACrB,IAAI;MACAT,GAAG,CAAEU,KAAK,KAAM;QAAEC,OAAO,EAAE;MAAK,CAAC,CAAC,CAAC,CAAC,CAAE;;MAEtC,MAAMC,QAAQ,GAAG,MAAMd,KAAK,CAACe,GAAG,CAAC,6BAA6B,CAAC;MAE/D,IAAID,QAAQ,IAAIA,QAAQ,CAACX,IAAI,EAAE;QAC3BD,GAAG,CAAEU,KAAK,KAAM;UACZP,YAAY,EAAES,QAAQ,CAACX,IAAI;UAC3BU,OAAO,EAAE,KAAK,CAAG;QACrB,CAAC,CAAC,CAAC;MACP,CAAC,MAAM;QACHG,OAAO,CAACC,KAAK,CAAC,gCAAgC,CAAC;QAC/Cf,GAAG,CAAEU,KAAK,KAAM;UACZP,YAAY,EAAE,EAAE;UAChBQ,OAAO,EAAE;QACb,CAAC,CAAC,CAAC;MACP;IACJ,CAAC,CAAC,OAAOI,KAAK,EAAE;MACZD,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5Cf,GAAG,CAAEU,KAAK,KAAM;QACZC,OAAO,EAAE,KAAK,CAAG;MACrB,CAAC,CAAC,CAAC;IACP;EACJ,CAAC;EAIG;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEAK,SAAS,EAAE,MAAAA,CAAOC,MAAM,EAAEC,cAAc,KAAK;IACzC,IAAI;MACA,MAAMpB,KAAK,CAACqB,GAAG,CAAC,oCAAoCF,MAAM,EAAE,CAAC;MAC7DjB,GAAG,CAAEU,KAAK,IAAK;QACX,MAAMU,YAAY,GAAGV,KAAK,CAACP,YAAY,CAACkB,GAAG,CAAEC,IAAI,IAC7CA,IAAI,CAACC,GAAG,KAAKN,MAAM,GAAG;UAAE,GAAGK,IAAI;UAAEE,SAAS,EAAEN;QAAe,CAAC,GAAGI,IACnE,CAAC;QACD,OAAO;UACHnB,YAAY,EAAEiB;QAClB,CAAC;MACL,CAAC,CAAC;IACN,CAAC,CAAC,OAAOL,KAAK,EAAE;MACZD,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAChD;EACJ,CAAC;EACDU,YAAY,EAAE,MAAOC,QAAQ,IAAK;IAC9B,IAAI;MACA;MACA1B,GAAG,CAAEU,KAAK,IAAK;QACX,MAAMN,SAAS,GAAGM,KAAK,CAACN,SAAS,CAAC,CAAE;QACpC,MAAMuB,SAAS,GAAG;UACd,GAAGD,QAAQ;UACXE,MAAM,EAAExB,SAAS,CAAG;QACxB,CAAC;;QAED;QACA,MAAMQ,QAAQ,GAAGd,KAAK,CAACwB,IAAI,CAAC,6BAA6B,EAAEK,SAAS,CAAC,CAAC,CAAE;;QAExE;QACAf,QAAQ,CAACiB,IAAI,CAACC,GAAG,IAAI;UACjB,MAAMC,OAAO,GAAGD,GAAG,CAAC7B,IAAI,CAAC,CAAC;;UAE1B;UACA,MAAM+B,mBAAmB,GAAG,CAAC,GAAGtB,KAAK,CAACP,YAAY,EAAE4B,OAAO,CAAC,CAAC,CAAC;;UAE9D,OAAO;YACH5B,YAAY,EAAE6B,mBAAmB,CAAE;UACvC,CAAC;QACL,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC,CAAC,OAAOjB,KAAK,EAAE;MACZD,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACrD;EACJ,CAAC;EAEDkB,aAAa,EAAE,MAAOP,QAAQ,IAAK;IAE/B,IAAI;MACD,MAAMd,QAAQ,GAAE,MAAMd,KAAK,CAACwB,IAAI,CAAC,8BAA8B,EAAEI,QAAQ,CAAC,CAAC,CAAC;;MAG5E,IAAId,QAAQ,EAAE;QAEZL,YAAY,CAAC2B,OAAO,CAAC,WAAW,EAAE7B,IAAI,CAAC8B,SAAS,CAACvB,QAAQ,CAACX,IAAI,CAACmC,MAAM,CAAChC,SAAS,CAAC,CAAC;MACnF,CAAC,MAAM;QACLU,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAC;MAC3C;IACH,CAAC,CAAC,OAAOA,KAAK,EAAE;MACZD,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACrD;EACJ,CAAC;EACDsB,UAAU,EAAE,MAAOX,QAAQ,IAAK;IAE5B,IAAI;MACP,MAAMd,QAAQ,GAAG,MAAMd,KAAK,CAACwB,IAAI,CAAC,8BAA8B,EAAEI,QAAQ,CAAC,CAAC,CAAC;MAC7E,IAAId,QAAQ,EAAE;QAEXL,YAAY,CAAC2B,OAAO,CAAC,MAAM,EAAE7B,IAAI,CAAC8B,SAAS,CAACvB,QAAQ,CAACX,IAAI,CAAC,CAAC;MAC7D,CAAC,MAAM;QACLa,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAC;MAC3C;IACE,CAAC,CAAC,OAAOA,KAAK,EAAE;MACZD,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACrD;EACJ,CAAC;EACDuB,UAAU,EAAE,MAAOZ,QAAQ,IAAK;IAC5B,IAAI;MAAA,IAAAa,kBAAA;MACA;MACA,MAAMC,UAAU,GAAGnC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;;MAE3D;MACA,MAAMiC,KAAK,GAAGD,UAAU,aAAVA,UAAU,wBAAAD,kBAAA,GAAVC,UAAU,CAAEJ,MAAM,cAAAG,kBAAA,uBAAlBA,kBAAA,CAAoBE,KAAK;MAEvC,IAAI,CAACA,KAAK,EAAE;QACR3B,OAAO,CAACC,KAAK,CAAC,2BAA2B,CAAC;QAC1CD,OAAO,CAAC4B,GAAG,CAAC,iDAAiD,CAAC;QAC9D;MACJ;;MAEA;MACA,MAAMC,iBAAiB,GAAG;QAAE,GAAGjB,QAAQ;QAAEe;MAAM,CAAC;MAEhD3B,OAAO,CAAC4B,GAAG,CAACC,iBAAiB,CAAC,CAAC,CAAC;;MAEhC,MAAM/B,QAAQ,GAAG,MAAMd,KAAK,CAACqB,GAAG,CAAC,6BAA6B,EAAEwB,iBAAiB,CAAC;MAClF7B,OAAO,CAAC4B,GAAG,CAAC9B,QAAQ,CAAC,CAAC,CAAE;;MAExB;MACA,IAAIA,QAAQ,CAACX,IAAI,CAAC2C,OAAO,EAAE;QACvB9B,OAAO,CAAC4B,GAAG,CAAC,4BAA4B,CAAC;MAG7C,CAAC,MAAM;QACH5B,OAAO,CAAC4B,GAAG,CAAC,uCAAuC,CAAC;MACxD;IAEJ,CAAC,CAAC,OAAO3B,KAAK,EAAE;MACZD,OAAO,CAACC,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACpCD,OAAO,CAAC4B,GAAG,CAAC,yCAAyC,CAAC;IAC1D;EACJ;AAEJ,CAAC,CAAC,CAAC;AAEH,eAAe3C,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}