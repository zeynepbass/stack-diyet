{"ast":null,"code":"import { create } from 'zustand';\nimport axios from \"axios\";\nconst useStore = create(set => ({\n  data: [],\n  fetchPost: async () => {\n    try {\n      const response = await axios.get('http://localhost:6099/panel');\n      set({\n        data: response.data // Storing the fetched data in 'data' field\n      });\n    } catch (error) {\n      console.error('Error fetching data:', error); // Log the error\n    }\n  },\n  fetchLike: async (postId, incrementedLikeCount) => {\n    try {\n      // Optimistically update the like count in the UI first\n      set(state => {\n        const updatedPosts = state.data.map(post => post.id === postId ? {\n          ...post,\n          likeCount: incrementedLikeCount\n        } : post);\n        return {\n          data: updatedPosts\n        };\n      });\n\n      // Send PUT request to update the like count on the backend\n      const response = await axios.put(`/panel/like/${postId}`, {\n        likeCount: incrementedLikeCount // Send the incremented like count\n      });\n\n      // If needed, sync the state with the server response\n      set(state => {\n        const updatedPosts = state.data.map(post => post.id === postId ? {\n          ...post,\n          likeCount: response.data.likeCount\n        } : post);\n        return {\n          data: updatedPosts\n        };\n      });\n    } catch (error) {\n      console.error('Error liking post:', error);\n\n      // If there's an error, revert the optimistic update\n      set(state => {\n        const updatedPosts = state.data.map(post => post.id === postId ? {\n          ...post,\n          likeCount: incrementedLikeCount - 1\n        } : post);\n        return {\n          data: updatedPosts\n        };\n      });\n    }\n  }\n}));\nexport default useStore;","map":{"version":3,"names":["create","axios","useStore","set","data","fetchPost","response","get","error","console","fetchLike","postId","incrementedLikeCount","state","updatedPosts","map","post","id","likeCount","put"],"sources":["/Users/zeynepbas/Documents/GitHub/stack-diyet/client/src/components/useStore.js"],"sourcesContent":["import { create } from 'zustand'\nimport axios from \"axios\"\n\nconst useStore = create((set) => ({\n    data: [],  \n    fetchPost: async () => { \n        try {\n            const response = await axios.get('http://localhost:6099/panel'); \n            set({\n                data: response.data, // Storing the fetched data in 'data' field\n            });\n        } catch (error) {\n            console.error('Error fetching data:', error); // Log the error\n        }\n    },\n    fetchLike: async (postId, incrementedLikeCount) => { \n        try {\n            // Optimistically update the like count in the UI first\n            set((state) => {\n                const updatedPosts = state.data.map((post) =>\n                    post.id === postId ? { ...post, likeCount: incrementedLikeCount } : post\n                );\n                return {\n                    data: updatedPosts,\n                };\n            });\n\n            // Send PUT request to update the like count on the backend\n            const response = await axios.put(`/panel/like/${postId}`, {\n                likeCount: incrementedLikeCount, // Send the incremented like count\n            });\n\n            // If needed, sync the state with the server response\n            set((state) => {\n                const updatedPosts = state.data.map((post) =>\n                    post.id === postId ? { ...post, likeCount: response.data.likeCount } : post\n                );\n                return {\n                    data: updatedPosts,\n                };\n            });\n        } catch (error) {\n            console.error('Error liking post:', error);\n\n            // If there's an error, revert the optimistic update\n            set((state) => {\n                const updatedPosts = state.data.map((post) =>\n                    post.id === postId ? { ...post, likeCount: incrementedLikeCount - 1 } : post\n                );\n                return {\n                    data: updatedPosts,\n                };\n            });\n        }\n    },\n}));\n\nexport default useStore;"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAGF,MAAM,CAAEG,GAAG,KAAM;EAC9BC,IAAI,EAAE,EAAE;EACRC,SAAS,EAAE,MAAAA,CAAA,KAAY;IACnB,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAML,KAAK,CAACM,GAAG,CAAC,6BAA6B,CAAC;MAC/DJ,GAAG,CAAC;QACAC,IAAI,EAAEE,QAAQ,CAACF,IAAI,CAAE;MACzB,CAAC,CAAC;IACN,CAAC,CAAC,OAAOI,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC,CAAC,CAAC;IAClD;EACJ,CAAC;EACDE,SAAS,EAAE,MAAAA,CAAOC,MAAM,EAAEC,oBAAoB,KAAK;IAC/C,IAAI;MACA;MACAT,GAAG,CAAEU,KAAK,IAAK;QACX,MAAMC,YAAY,GAAGD,KAAK,CAACT,IAAI,CAACW,GAAG,CAAEC,IAAI,IACrCA,IAAI,CAACC,EAAE,KAAKN,MAAM,GAAG;UAAE,GAAGK,IAAI;UAAEE,SAAS,EAAEN;QAAqB,CAAC,GAAGI,IACxE,CAAC;QACD,OAAO;UACHZ,IAAI,EAAEU;QACV,CAAC;MACL,CAAC,CAAC;;MAEF;MACA,MAAMR,QAAQ,GAAG,MAAML,KAAK,CAACkB,GAAG,CAAC,eAAeR,MAAM,EAAE,EAAE;QACtDO,SAAS,EAAEN,oBAAoB,CAAE;MACrC,CAAC,CAAC;;MAEF;MACAT,GAAG,CAAEU,KAAK,IAAK;QACX,MAAMC,YAAY,GAAGD,KAAK,CAACT,IAAI,CAACW,GAAG,CAAEC,IAAI,IACrCA,IAAI,CAACC,EAAE,KAAKN,MAAM,GAAG;UAAE,GAAGK,IAAI;UAAEE,SAAS,EAAEZ,QAAQ,CAACF,IAAI,CAACc;QAAU,CAAC,GAAGF,IAC3E,CAAC;QACD,OAAO;UACHZ,IAAI,EAAEU;QACV,CAAC;MACL,CAAC,CAAC;IACN,CAAC,CAAC,OAAON,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;;MAE1C;MACAL,GAAG,CAAEU,KAAK,IAAK;QACX,MAAMC,YAAY,GAAGD,KAAK,CAACT,IAAI,CAACW,GAAG,CAAEC,IAAI,IACrCA,IAAI,CAACC,EAAE,KAAKN,MAAM,GAAG;UAAE,GAAGK,IAAI;UAAEE,SAAS,EAAEN,oBAAoB,GAAG;QAAE,CAAC,GAAGI,IAC5E,CAAC;QACD,OAAO;UACHZ,IAAI,EAAEU;QACV,CAAC;MACL,CAAC,CAAC;IACN;EACJ;AACJ,CAAC,CAAC,CAAC;AAEH,eAAeZ,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}